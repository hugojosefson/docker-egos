# egos; embed golang script in shell script

Command line tool to embed golang script in shell script.

This fork is to enable using `egos` via Docker.

## Usage

Please check the help message:

```bash
docker run --rm -i hugojosefson/egos -h
```

## Examples

A "hello, world" program:

```bash
docker run --rm -i hugojosefson/egos -i '"fmt"' 'fmt.Println("hello, world")'
```

```bash
#=> "hello, world\n"
```

---

Print source code generated by egos (useful for debugging).

```bash
docker run --rm -i hugojosefson/egos -d -i '"fmt"' 'fmt.Println("hello, world")'
```

```bash
#=> `// generated by egos(1)
#    package main
#
#    import (
#    	"fmt"
#    )
#
#    func main() {
#    	fmt.Println("hello, world")
#    }
#    `
```

---

Access command-line arguments.

```bash
docker run --rm -i hugojosefson/egos -i '"fmt";"os"' '
for _, s := range os.Args {
    fmt.Println(s)
}' a BB  'c  c'
```

```bash
#=> "a\nBB\nc  c\n"
```

---

"Each line" mode (add loops around code).

```bash
docker run --rm -i hugojosefson/egos -i 'f "fmt"' -n 'f.Println(line)' <<'END'
foo
bar
baz
END
```

```bash
#=> "foo\nbar\nbaz\n"
```

---

"each line with print" mode.

```bash
docker run --rm -i hugojosefson/egos -p 'line += line' <<'END'
foo
bar
baz
END
```

```bash
#=> "foofoo\nbarbar\nbazbaz\n"
```

If you want to make your script load faster:

  1. Print source code generated by egos, and redirect to a file.
  2. Compile the file by using the `go build` command.

```bash
docker run --rm -i hugojosefson/egos -d -p 'line += line' > linedup.go
docker run --rm -i -v $(pwd):/go -u $(id -u):$(id -g) golang go build linedup.go

./linedup <<'END'
foo
bar
baz
END
```

```bash
#=> "foofoo\nbarbar\nbazbaz\n"
```

## License

zlib License.
